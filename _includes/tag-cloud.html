{%- assign max_count = 0 -%}
{%- for tag in site.tags -%}
  {%- if tag[1].size > max_count -%}
    {%- assign max_count = tag[1].size -%}
  {%- endif -%}
{%- endfor -%}

<div class="tag-cloud">
  {%- for tag in site.tags -%}
    {%- assign tag_name = tag[0] -%}
    {%- assign tag_count = tag[1].size -%}
    {%- assign size_ratio = tag_count | times: 1.0 | divided_by: max_count -%}
    {%- assign font_size = size_ratio | times: 1.0 | plus: 1.0 -%}
    <a href="{{ '/tags/' | append: tag_name | relative_url }}"
       class="tag-cloud__tag"
       style="font-size: {{ font_size }}em;"
       title="{{ tag_count }} post{% if tag_count > 1 %}s{% endif %}">
      {{ tag_name }}
    </a>
  {%- endfor -%}
</div>
